(this["webpackJsonpreact-geoquakes"]=this["webpackJsonpreact-geoquakes"]||[]).push([[0],{65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),s=a(5),r=a.n(s),c=a(22),o=a(7),l=a(8),d=a(10),u=a(9),m=a(13),h=a.n(m),j=a(67),p=a(0);var b=function(e){var t=((Date.now()-new Date(e.data.properties.time))/36e5).toFixed();return Object(p.jsxs)("div",{className:"earthquake-details",children:[Object(p.jsx)("p",{children:function(e){var t=e.indexOf("of");-1===t?t++:t+=3;var a=e.slice(t);return a.slice(0,1).toUpperCase().concat(a.slice(1))}(e.data.properties.place)}),Object(p.jsxs)("p",{children:["M ",e.data.properties.mag," - ",t," hours ago"]})]})},g=a(6),v=a.p+"static/media/earthquake.97de581e.png",f=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).markerClickHandler=function(e,t,a){n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapClickHandler=function(e){n.state.showingInfoWindow&&n.setState({showingInfoWindow:!1,activeMarker:null})},n.state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{}},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=window.google,a=this.props.data.map((function(a){var n;return n=a.properties.mag<4?new t.maps.Size(15,15):a.properties.mag<6?new t.maps.Size(25,25):a.properties.mag<8?new t.maps.Size(35,35):new t.maps.Size(50,50),Object(p.jsx)(g.Marker,{onClick:e.markerClickHandler,title:a.properties.title,name:a.properties.title,position:{lat:a.geometry.coordinates[1],lng:a.geometry.coordinates[0]},icon:{url:v,scaledSize:n,origin:new t.maps.Point(0,0),anchor:new t.maps.Point(0,0)}},Object(j.a)())}));return Object(p.jsxs)(g.Map,{style:{position:"relative",width:"90%",height:"90%"},google:this.props.google,zoom:2,initialCenter:{lat:47.6,lng:-122.3},children:[a,Object(p.jsx)(g.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,children:Object(p.jsx)("div",{className:"info",children:Object(p.jsx)("p",{children:this.state.selectedPlace.name})})})]})}}]),a}(i.a.Component),O=Object(g.GoogleApiWrapper)({apiKey:"AIzaSyDq9Qg59ppIwA5vsoGWMRnNfzw75xn7N_I"})(f);var x=function(e){return Object(p.jsxs)("div",{className:"navbar",children:[Object(p.jsxs)("div",{className:"logo-title",children:[Object(p.jsx)("img",{className:"quake-icon",src:v,alt:"quake icon"}),Object(p.jsx)("h1",{children:"Geoquakes"})]}),Object(p.jsxs)("form",{action:"/",method:"get",children:[Object(p.jsxs)("div",{className:"form-input",children:[Object(p.jsx)("label",{htmlFor:"magnitude",children:"Magnitude"}),Object(p.jsxs)("select",{name:"magnitude",id:"magnitude",onChange:e.magnitudeHandler,children:[Object(p.jsx)("option",{value:"1",children:"1+"}),Object(p.jsx)("option",{value:"2.5",children:"2.5+"}),Object(p.jsx)("option",{value:"4.5",children:"4.5+"}),Object(p.jsx)("option",{value:"significant",children:"significant"})]})]}),Object(p.jsxs)("div",{className:"form-input",children:[Object(p.jsx)("label",{htmlFor:"timeframe",children:"Timeframe"}),Object(p.jsxs)("select",{name:"timeframe",id:"timeframe",onChange:e.timeframeHandler,children:[Object(p.jsx)("option",{value:"hour",children:"the past hour"}),Object(p.jsx)("option",{value:"day",children:"the past day"}),Object(p.jsx)("option",{value:"week",children:"the past week"}),Object(p.jsx)("option",{value:"month",children:"the past month"}),Object(p.jsx)("option",{value:"all-time",children:"all time"})]})]}),Object(p.jsx)("input",{type:"submit",value:"search",onClick:e.submitHandler})]})]})};a(65);var k=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).magnitudeHandler=function(e){n.setState({magnitude:e.target.value})},n.timeframeHandler=function(e){n.setState({timeframe:e.target.value})},n.submitHandler=function(e){e.preventDefault();var t=function(e,t){var a,n=new Date(Date.now()),i=function(e){return e.toISOString().split(".")[0].split("T").join("%20")},s=i(n),r=parseFloat(e)||8;switch(t){case"hour":a=i(new Date(n.getTime()-36e5));break;case"day":a=i(new Date(n.getTime()-864e5));break;case"week":a=i(new Date(n.getTime()-6048e5));break;case"month":a=i(new Date(n.getTime()-24192e5));break;case"all-time":a="1900-01-01%2000:00:00"}return[a,s,r]}(n.state.magnitude,n.state.timeframe),a=Object(c.a)(t,3),i=a[0],s=a[1],r=a[2],o="https://earthquake.usgs.gov/fdsnws/event/1/query.geojson?starttime=".concat(i,"&endtime=").concat(s,"&minmagnitude=").concat(r,"&orderby=magnitude&limit=100");h.a.get(o).then((function(e){n.setState({quakesData:e.data.features})})).catch((function(e){n.setState({error:e})}))},n.state={quakesData:[],timeframe:"",magnitude:"",error:null,isLoaded:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/").then((function(t){e.setState({quakesData:t.data.features})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.quakesData.map((function(e){return Object(p.jsx)(b,{data:e},Object(j.a)())})),t=new Date(Date.now()-6048e5).toLocaleDateString(),a=new Date(Date.now()).toLocaleDateString();return this.state.error?Object(p.jsxs)("div",{children:["Error: ",this.state.error.message]}):Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)(x,{magnitudeHandler:this.magnitudeHandler,timeframeHandler:this.timeframeHandler,submitHandler:this.submitHandler,data:this.state.quakesData}),Object(p.jsxs)("div",{className:"main-content-div",children:[Object(p.jsx)("div",{className:"mapContainer",children:Object(p.jsx)(O,{data:this.state.quakesData})}),Object(p.jsxs)("div",{className:"quakeContainer",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:this.state.quakesData.length>0?"".concat(t," - ").concat(a):"Select a Timeframe and Magnitude"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:"quake-count",children:this.state.quakesData.length}),Object(p.jsx)("p",{children:"earthquakes"})]})]}),Object(p.jsx)("div",{id:"info",children:e})]})]})]})}}]),a}(n.Component);r.a.render(Object(p.jsx)(k,{}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.c234e601.chunk.js.map